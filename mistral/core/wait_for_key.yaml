---
version: '2.0'
wait_for_key:
  description: ''
  type: direct
  input:
    - key
    - url
    - method
    - headers: {}
    - body: {}
  tasks:
    listen_for_key:
      action: std.http url=<% $.url %> method=<% $.method %> headers=<% $.headers %> body=<% $.body %>
      publish:
        data: <% task(listen_for_key).result.content %>
      publish-on-error:
        data: {}
      on-success:
        - fail: <% not $.data.containsKey($.key) %>

