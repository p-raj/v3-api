---
version: '2.0'
wait_for_input:
  description: ''
  type: direct
  input:
    - url
    - headers: {}
  tasks:
    listen_for_input:
      action: std.http url=<% $.url %> headers=<% $.headers %>
      publish:
        data: <% task(listen_for_input).result.content %>
        cookies: <% task(listen_for_input).result.cookies %>
        elapsed: <% task(listen_for_input).result.elapsed %>
        encoding: <% task(listen_for_input).result.encoding %>
        headers: <% task(listen_for_input).result.headers %>
        history: <% task(listen_for_input).result.history %>
        reason: <% task(listen_for_input).result.reason %>
        status: <% task(listen_for_input).result.status %>
        url: <% task(listen_for_input).result.url %>
      publish-on-error:
        error: <% task(listen_for_input).result.content %>
        cookies: <% task(listen_for_input).result.cookies %>
        elapsed: <% task(listen_for_input).result.elapsed %>
        encoding: <% task(listen_for_input).result.encoding %>
        headers: <% task(listen_for_input).result.headers %>
        history: <% task(listen_for_input).result.history %>
        reason: <% task(listen_for_input).result.reason %>
        status: <% task(listen_for_input).result.status %>
        url: <% task(listen_for_input).result.url %>
      on-success:
        - fail: <% $.data.len() = 0 %>
