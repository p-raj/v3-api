---
version: '2.0'
refresh_oauth_token:
  description: ''
  type: direct
  input:
    - token_endpoint
    - client_id
    - client_secret
    - refresh_token
  tasks:
    refresh_token:
      action: std.http
      input:
        url: <% $.token_endpoint %>
        method: POST
        headers: {
          Content-Type: 'application/x-www-form-urlencoded'
        }
        body: client_secret=<% $.client_secret %>&grant_type=refresh_token&refresh_token=<% $.refresh_token %>&client_id=<% $.client_id %>
      publish:
        access_token: <% task(refresh_token).result.content.access_token %>
        token_type: <% task(refresh_token).result.content.token_type %>
