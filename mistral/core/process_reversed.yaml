---
version: '2.0'
process_reversed:
  description: ''
  type: direct
  input:
    - url
    - process
    - headers: {}
  tasks:
    listen_for_input:
      workflow: wait_for_input
      input:
        url: <% $.url %>
        headers: <% $.headers %>
      publish:
        result: <% task(listen_for_input).result %>
      publish-on-error:
        result: <% task(listen_for_input).result %>
      retry: delay=10 count=3
      on-success:
        - original_process
    original_process:
      workflow: process
      input:
        url: <% $.process %>
        body: <% task(original_process).result.content %>
        headers: <% $.headers %>
      publish:
        result: <% task(original_process).result %>
      publish-on-error:
        result: <% task(original_process).result %>
